<?xml version="1.0" encoding="utf-8" ?>
<opc:ModelDesign
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	xmlns:opc="http://opcfoundation.org/UA/ModelDesign.xsd"
  xmlns:ua="http://opcfoundation.org/UA/"
  xmlns:uax="http://opcfoundation.org/UA/2008/02/Types.xsd"
	xmlns="http://buzzfrog.se/OpcAlarmServer"
  TargetNamespace="http://buzzfrog.se/OpcAlarmServer"
>
  <opc:Namespaces>
    <opc:Namespace Name="OpcUa" Prefix="Opc.Ua" XmlNamespace="http://opcfoundation.org/UA/2008/02/Types.xsd">http://opcfoundation.org/UA/</opc:Namespace>
    <opc:Namespace Name="OpcAlarmServer" Prefix="buzzfrog.OpcAlarmServer" InternalPrefix="buzzfrog.OpcAlarmServer">http://buzzfrog.se/OpcAlarmServer</opc:Namespace>
  </opc:Namespaces>

  <opc:ObjectType SymbolicName="TankType" BaseType="ua:BaseObjectType">
    <opc:Children>
      <opc:Variable SymbolicName="TankLevel" DataType="ua:Double" />
      <opc:Object SymbolicName="TankLevelCondition" TypeDefinition="LessThan5LiterInTankConditionType" />
    </opc:Children>  
  </opc:ObjectType>

  <opc:ObjectType SymbolicName="LessThan5LiterInTankConditionType" BaseType="ua:ConditionType">
  </opc:ObjectType>
  
  <opc:ObjectType SymbolicName="BlinkersOnEventType" BaseType="ua:BaseEventType">
    <opc:Description>An event raised when blinker starts</opc:Description>
    <opc:Children>
      <opc:Property SymbolicName="PositionOfBlinker" DataType="ua:String" ValueRank="Scalar" />
    </opc:Children>
  </opc:ObjectType>

  <opc:ObjectType SymbolicName="BlinkersOffEventType" BaseType="ua:BaseEventType">
    <opc:Description>An event raised when blinker starts</opc:Description>
    <opc:Children>
      <opc:Property SymbolicName="PositionOfBlinker" DataType="ua:String" ValueRank="Scalar" />
    </opc:Children>
  </opc:ObjectType>

  <opc:ObjectType SymbolicName="CarBlinkerType" BaseType="ua:BaseObjectType">
    <opc:Description>A Blinker</opc:Description>  
  </opc:ObjectType>
  
  <opc:ObjectType SymbolicName="CarBlinkersType" BaseType="ua:BaseObjectType">
    <opc:Description>Blinkers</opc:Description>
    <opc:Children>
      <opc:Object SymbolicName="LeftBlinker" TypeDefinition="CarBlinkerType" SupportsEvents="true">
        <opc:BrowseName>Left Blinker</opc:BrowseName>
        <opc:Children>
          <opc:Object SymbolicName="LeftBlinkersOn" TypeDefinition="BlinkersOnEventType" />
          <opc:Object SymbolicName="LeftBlinkersOff" TypeDefinition="BlinkersOffEventType" />
        </opc:Children>
      </opc:Object>
      <opc:Object SymbolicName="RightBlinker" TypeDefinition="CarBlinkerType" SupportsEvents="true">
        <opc:BrowseName>Right Blinker</opc:BrowseName>
      </opc:Object>
    </opc:Children>
  </opc:ObjectType>
  
  <opc:ObjectType SymbolicName="CarType" BaseType="ua:BaseObjectType">
    <opc:Description>A generic car type</opc:Description>
    <opc:Children>
      <opc:Object SymbolicName="Blinkers" TypeDefinition="CarBlinkersType" SupportsEvents="true">
        <opc:BrowseName>Blinkers</opc:BrowseName>
      </opc:Object>
      <opc:Object SymbolicName="Tank" TypeDefinition="TankType">
        
      </opc:Object>
    </opc:Children>
  </opc:ObjectType>

  <opc:Object SymbolicName="Car1" TypeDefinition="CarType" SupportsEvents="true">
    <opc:BrowseName>Car #1</opc:BrowseName>
    <opc:References>
      <opc:Reference IsInverse="true">
        <opc:ReferenceType>ua:Organizes</opc:ReferenceType>
        <opc:TargetId>ua:ObjectsFolder</opc:TargetId>
      </opc:Reference>
    </opc:References>
  </opc:Object>

</opc:ModelDesign>